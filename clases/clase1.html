<!DOCTYPE html>
<html>
<head>
  <title>Procesamiento y Análisis de Datos (Clase 1)</title>
  <meta charset="utf-8">
  <meta name="description" content="Procesamiento y Análisis de Datos (Clase 1)">
  <meta name="author" content="">
  <meta name="generator" content="slidify" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <link rel="stylesheet" href="../libraries/frameworks/io2012/css/default.css" media="all" >
  <link rel="stylesheet" href="../libraries/frameworks/io2012/css/slidify.css" >
  <link rel="stylesheet" href="../libraries/highlighters/highlight.js/css/tomorrow.css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->  
  
  <!-- Grab CDN jQuery, fall back to local if offline -->
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
  <script>window.jQuery || document.write('<script src="../libraries/widgets/quiz/js/jquery.js"><\/script>')</script> 
  <script data-main="../libraries/frameworks/io2012/js/slides" 
    src="../libraries/frameworks/io2012/js/require-1.0.8.min.js">
  </script>
  
  

</head>
<body style="opacity: 0">
  <slides class="layout-widescreen">
    
    <!-- LOGO SLIDE -->
        <slide class="title-slide segue nobackground">
  <aside class="gdbar">
    <img src="../assets/img/escudo_uc.svg">
  </aside>
  <hgroup class="auto-fadein">
    <h1>Procesamiento y Análisis de Datos (Clase 1)</h1>
    <h2>Mini-curso de R para usuarios de Excel</h2>
    <p>Profesor: Mauricio Vargas Sepúlveda<br/>Ayudantes: Maximiliano Diener, Teresa Valdivia, José Vinés<br/><br/><br/>Pontificia Universidad Católica de Chile</p>
  </hgroup>
  <article></article>  
  <footer class = 'license'>
    <a href='http://creativecommons.org/licenses/by-nc-sa/4.0/'>
    <img width = '80px' src = 'http://mirrors.creativecommons.org/presskit/buttons/88x31/png/by-nc-sa.png'>
    </a>
  </footer>
</slide>
    

    <!-- SLIDES -->
    <slide class="" id="slide-1" style="background:;">
  <hgroup>
    <h1>Introducción</h1>
  </hgroup>
  <article data-timings="">
    <p>A menudo me dicen que R es difícil. ¡No lo es! El comentario tiene su raíz en que Excel y R son muy distintos entre si. Lo mismo en el caso de SPSS.</p>

<p>R es un lenguaje de programación que otorga una amplia variedad de técnicas estadísticas y gráficas y además es altamente extendible. R se creó con la finalidad de ser flexible más que ser fácil de usar, pero eso ha ido cambiando en las últimas versiones.</p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-2" style="background:;">
  <hgroup>
    <h1>R versus Excel</h1>
  </hgroup>
  <article data-timings="">
    <p>Excel</p>

<ul>
<li>Limitado a tablas</li>
<li>Compatible con XLSX, XLSC y CSV/TSV</li>
</ul>

<p>R</p>

<ul>
<li>Múltiples estructuras de datos (vector, matriz, lista, unión)</li>
<li>Nos centraremos en las uniones, en particular en las tablas</li>
<li>Compatible con los formatos de Excel, SPSS, Stata y Bases de Datos</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-3" style="background:;">
  <hgroup>
    <h1>Tidy Data</h1>
  </hgroup>
  <article data-timings="">
    <p>¿Qué significa en la práctica?</p>

<ul>
<li>Cada variable forma una columna</li>
<li>Cada observación forma una fila</li>
<li>Cada unidad observacional forma una tabla</li>
</ul>

<p><img src="img/tidy.png" alt="tidy.png" style="width: 80%;"/></p>

<p>Tldr; esta es la 3era forma normal de Codd.</p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-4" style="background:;">
  <hgroup>
    <h1>La filosofía del curso</h1>
  </hgroup>
  <article data-timings="">
    <p><img src="img/tidy-data.png" alt="tidy-data.png" style="width: 100%;"/></p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-5" style="background:;">
  <hgroup>
    <h1>Google Sheets</h1>
  </hgroup>
  <article data-timings="">
    <p>Funciones básicas que deberían manejar:</p>

<ul>
<li>SUM()</li>
<li>SUMIF()</li>
<li>VLOOKUP()</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-6" style="background:;">
  <hgroup>
    <h1>Google Sheets</h1>
  </hgroup>
  <article data-timings="">
    <h2>SUM()</h2>

<h3 style="font-family: 'Source Code Pro',monospace;">
SUM(RANGO)
<br>
=SUM(A2:A100)
<br>
=SUM(1,2,3,4,5)
<br>
=SUM(1,2,A2:A50)
</h3>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-7" style="background:;">
  <hgroup>
    <h1>Google Sheets</h1>
  </hgroup>
  <article data-timings="">
    <h2>SUMIF()</h2>

<h3 style="font-family: 'Source Code Pro',monospace;">
SUMIF(RANGO, CRITERIO, RANGO SUMA)
<br>
SUMIF(A1:A10,">20")
<br>
SUMIF(A1:A10,"Santiago Centro",B1:B10)
</h3>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-8" style="background:;">
  <hgroup>
    <h1>Google Sheets</h1>
  </hgroup>
  <article data-timings="">
    <h2>VLOOPKUP()</h2>

<h3 style="font-family: 'Source Code Pro',monospace;">
VLOOPKUP(VALOR BUSCADO, RANGO, INDICE, ORDENADO)
<br>
VLOOKUP(10003, A2:B26, 2, FALSE)
</h3>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-9" style="background:;">
  <hgroup>
    <h1>Google Sheets</h1>
  </hgroup>
  <article data-timings="">
    <h2>Actividad de repaso</h2>

<p>Veamos el archivo <a href="https://goo.gl/bp22w9">lecture1_officesupplies</a></p>

<ol>
<li>Crea una copia de la tabla en tu cuenta de Google Drive</li>
<li>En una nueva hoja lleva la tabla a formato tidy</li>
<li>Crea una columna que muestre el ingreso correspondiente a cada registro</li>
<li>En una nueva hoja para cada tabla muestra Las unidades vendidas totales por:

<ol>
<li>Región</li>
<li>Item</li>
<li>Por región e item</li>
</ol></li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-10" style="background:;">
  <hgroup>
    <h1>R y RStudio</h1>
  </hgroup>
  <article data-timings="">
    <p>El problema para los usuarios nuevos es que si descargas R desde CRAN, The Comprehensive R Archive Network, el sitio oficial, obtienes una terminal y una interfaz gráfica muy limitada. </p>

<p>Un entorno de desarrollo integrado (IDE) como RStudio entrega una ventana con paneles organizados como en SPSS. Esto es como comprar el motor (R) y el resto del automóvil (RStudio) por separado.</p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-11" style="background:;">
  <hgroup>
    <h1>Paquetes de R</h1>
  </hgroup>
  <article data-timings="">
    <p>R contempla muchas funciones, desde la media y la desviación estándar a funciones específicas para quienes se dedican a literatura o finanzas.</p>

<p>En lugar de proveer un instalador de varios GB con todas las funciones, la instalación de R provee un conjunto mínimo de funciones de amplio uso. Para extender la instalación básica la comunidad R ha organizado las distintas funciones en &quot;paquetes&quot; que son conjuntos de funciones ordenados por tópicos y siguen una lógica similar a la de los complementos del navegador de internet.</p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-12" style="background:;">
  <hgroup>
    <h1>Base R y Tidyverse</h1>
  </hgroup>
  <article data-timings="">
    <p>Base R es el núcleo de R, es lo que se obtiene al instalar R. Esta base viene del lenguaje S, otro lenguaje de programación, cuya primera versión es de 1976 y sobre esa base existen desarrollos nuevos.</p>

<p>El Tidyverse es un conjunto de paquetes de R con una filosofía común y están diseñados para trabajar en conjunto y simplificar diferentes tareas que se pueden hacer con base R.</p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-13" style="background:;">
  <hgroup>
    <h1>¡Eficiencia, Eficiencia, Eficiencia!</h1>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Para aprovechar eficientemente el tiempo de la clase la instalación de R quedará para el final</li>
<li>Vamos a usar RStudio Server</li>
<li>Para la clase todo lo necesario ya está configurado en el servidor.</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-14" style="background:;">
  <hgroup>
    <h1>Instalación de paquetes de R</h1>
  </hgroup>
  <article data-timings="">
    <p>Veremos el uso básico de los siguientes paquetes de R que son parte del Tidyverse:</p>

<ul>
<li><code>readr</code>: importar CSV, TSV y similares</li>
<li><code>readxl</code>: importar XLSX y XLS</li>
<li><code>dplyr</code>: manipulación de datos</li>
<li><code>ggplot2</code>: gráficos</li>
<li><code>forcats</code>: manejo de variables categóricas</li>
</ul>

<p>Para usar lo anterior emplearemos <code>pacman</code>, un paquete de administración que carga e instala paquetes.</p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-15" style="background:;">
  <hgroup>
    <h1>¿Cómo se usará lo anterior?</h1>
  </hgroup>
  <article data-timings="">
    <p><img src="img/workflow.svg" alt="workflow.svg" style="width: 80%;"/></p>

<p>El ícono <code>%&gt;%</code> corresponde al paquete <code>magrittr</code>, se carga automáticamente al cargar <code>dplyr</code> y permite conectar distintas funciones.</p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-16" style="background:;">
  <hgroup>
    <h1>Gramática de verbos</h1>
  </hgroup>
  <article data-timings="">
    <p><code>dplyr</code> provee una serie de funciones que permiten modificar una tabla, esas funciones se han estructurado en forma de verbos:</p>

<ul>
<li><code>select()</code>    seleccionar columnas</li>
<li><code>filter()</code> filtrar filas</li>
<li><code>arrange()</code>   reordenar filas</li>
<li><code>mutate()</code>    crear columnas</li>
<li><code>group_by()</code> agrupar por valores antes de realizar una operación (e.g. expresar promedios de los grupos <em>Santiago</em>, <em>Valdivia</em> y <em>Concepción</em> de la columna <code>X1</code>)</li>
<li><code>summarise()</code> resumir valores (e.g. reducir la tabla y mostrar el sueldo promedio por grupo de la columna <code>X2</code> y el arriendo promedio por grupo de la columna <code>X3</code>)</li>
<li><code>ungroup()</code> desagrupar (e.g. si necesito realizar una operación posterior a la de <code>summarise()</code>)</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-17" style="background:;">
  <hgroup>
    <h2>¿Cómo operan los verbos?</h2>
  </hgroup>
  <article data-timings="">
    <p>Supongamos que <code>arriendos_por_region.csv</code> contiene 300 observaciones (100 por región) de los sueldos de trabajadores de <em>Santiago</em>, <em>Valdivia</em> y <em>Concepción</em> desplegados de la siguiente forma:</p>

<table><thead>
<tr>
<th>X1</th>
<th>X2</th>
<th>X3</th>
</tr>
</thead><tbody>
<tr>
<td>Santiago</td>
<td>500000</td>
<td>120000</td>
</tr>
<tr>
<td>Santiago</td>
<td>1200000</td>
<td>350000</td>
</tr>
<tr>
<td>etc...</td>
<td></td>
<td></td>
</tr>
</tbody></table>

<p><br>El arriendo y sueldo promedio ordenado en una tabla de 3x3 de menos a más sería:</p>

<pre><code class="r">read_csv(&quot;arriendos_por_region.csv&quot;) %&gt;% 
  group_by(X1) %&gt;% # agrupar por región
  summarise(sueldo_promedio = mean(X2),
            arriendo_promedio = mean(X3)) %&gt;% # calcular sueldo y arriendo promedio
  ungroup() %&gt;% # desagrupar 
  arrange(X2,X3) # ordenar de menos a más
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-18" style="background:;">
  <hgroup>
    <h2>Tarea Nº1</h2>
  </hgroup>
  <article data-timings="">
    <p>Abre RStudio Server, ve a File &rarr; New Project y crea un nuevo proyecto con tu nombre en un nuevo directorio (e.g <em>mauricio_vargas_clase_1</em>)</p>

<p>La próxima vez que quieras ver tus avances puedes ir al directorio del proyecto y abrir el archivo RProj para tener todo linkeado a ese directorio.</p>

<p>Ve a File &rarr; New &rarr; RScript para ir anotando lo que veremos a continuación</p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-19" style="background:;">
  <hgroup>
    <h2>Tarea Nº1</h2>
  </hgroup>
  <article data-timings="">
    <p>Ejecuta el siguiente código haciendo click en Run o presionando Ctrl/Cmd+Enter:</p>

<pre><code class="r">### instalar y cargar pacman usando Base R
if (!require(&quot;pacman&quot;)) install.packages(&quot;pacman&quot;)

### instalar y/o cargar lo ya mencionado usando pacman
p_load(readr,readxl,dplyr,ggplot2,forcats)
</code></pre>

<p>La primera línea instruye a la máquina a instalar <code>pacman</code> si no encuentra el paquete.</p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-20" style="background:;">
  <hgroup>
    <h2>Tarea Nº2</h2>
  </hgroup>
  <article data-timings="">
    <p>En R se puede leer CSV, JSON, XLSX y otros formatos incluyendo DTA y SAV. Para simplificar, por esta vez, usaremos <code>mpg</code> que es un dataset que incluye <code>ggplot2</code>.</p>

<p>Pasos a seguir:</p>

<ol>
<li>En el panel de la derecha ir a Help y busca &quot;mpg&quot;.</li>
<li>En el panel inferior ir a Console y teclea &quot;mpg + Enter&quot;.</li>
<li>Filtrar y ver los modelos lanzados después del año 2000 (columna <code>year</code>) y que tienen 4 cilindros (columna <code>cyl</code>)</li>
<li>Filtrar por tipo de transmisión (<code>trans</code>) y por millas por galón en ciudad (<code>cty</code>) y millas por galón en autopista (<code>hwy</code>) descendentemente.</li>
<li>Filtrar los automóviles de 4 o más cilindros hechos en el año 2008 y ordenados ascendentemente por <code>cty</code>.</li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-21" style="background:;">
  <hgroup>
    <h2>Desarrollo Tarea Nº2</h2>
  </hgroup>
  <article data-timings="">
    <h3>Paso 3:</h3>

<pre><code class="r">mpg %&gt;% 
  filter(year &gt; 2000,
         cyl == 4)
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-22" style="background:;">
  <hgroup>
    <h2>Desarrollo Tarea Nº2</h2>
  </hgroup>
  <article data-timings="">
    <h3>Paso 4:</h3>

<pre><code class="r">mpg %&gt;% 
  arrange(trans)

mpg %&gt;% 
  arrange(-cty)

mpg %&gt;% 
  arrange(trans,desc(cty),desc(hwy))
</code></pre>

<p>¡Esto no es posible de hacer en Excel excepto si se usa tablas dinámicas!</p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-23" style="background:;">
  <hgroup>
    <h2>Desarrollo Tarea Nº2</h2>
  </hgroup>
  <article data-timings="">
    <h3>Paso 5:</h3>

<pre><code class="r">mpg %&gt;% 
  filter(year == 2008, cyl == 4) %&gt;% 
  arrange(cty)
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-24" style="background:;">
  <hgroup>
    <h2>Tarea Nº3</h2>
  </hgroup>
  <article data-timings="">
    <p>Vamos a usar el archivo <a href="https://visualizacion-uc.github.io/procesamiento-y-analisis-de-datos/datasets/lecture1_officesupplies.xlsx">lecture1_officesupplies.xlsx</a> y lo vamos a descargar y leer desde R.</p>

<p>Pasos a seguir:</p>

<ol>
<li>Crear el directorio &quot;datasets&quot; y descargar el archivo si y sólo si este no está en el directorio &quot;datasets&quot;</li>
<li>Leer el archivo XLSX usando la función <code>read_excel</code> (una función del paquete <code>readxl</code>) y obtener las unidades vendidas totales por región, por item y por región e item</li>
<li>Obtener el ingreso total por región e item</li>
<li>Modificar el dataset original para agregar una columna de ingreso y guardar los resultados usando la función <code>write_csv</code> (una función del paquete <code>readr</code>)</li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-25" style="background:;">
  <hgroup>
    <h2>Desarrollo Tarea Nº3</h2>
  </hgroup>
  <article data-timings="">
    <h3>Paso 1:</h3>

<p>¡No olvidar ir guardando los cambios!</p>

<pre><code class="r">folder = &quot;datasets/&quot;
file = paste0(folder,&quot;lecture1_officesupplies.xlsx&quot;) 
### &quot;paste0&quot; pega elementos sin espacios
### &quot;paste&quot; agrega espacios

try(dir.create(folder))

if(!file.exists(file)) {
  download.file(
    &quot;https://visualizacion-uc.github.io/procesamiento-y-analisis-de-datos/datasets/lecture1_officesupplies.xlsx&quot;,
    file)
}
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-26" style="background:;">
  <hgroup>
    <h2>Desarrollo Tarea Nº3</h2>
  </hgroup>
  <article data-timings="">
    <h3>Paso 2:</h3>

<pre><code class="r">officesupplies = read_excel(file)

### vista rápida de las columnas
str(officesupplies)

### convertir la columna Units a enteros
officesupplies = officesupplies %&gt;% mutate(Units = as.integer(Units))

### regiones distintas
officesupplies %&gt;% select(Region) %&gt;% distinct()

### items distintos
officesupplies %&gt;% select(Item) %&gt;% distinct()
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-27" style="background:;">
  <hgroup>
    <h2>Desarrollo Tarea Nº3</h2>
  </hgroup>
  <article data-timings="">
    <h3>Paso 2 (continuación):</h3>

<pre><code class="r">### unidades totales por región
officesupplies %&gt;% 
  select(Region,Units) %&gt;%
  group_by(Region) %&gt;% 
  summarise(Sold_Units = sum(Units))

### unidades totales por item
officesupplies %&gt;% 
  select(Item,Units) %&gt;% 
  group_by(Item) %&gt;% 
  summarise(Sold_Units = sum(Units))

### unidades totales por region e item
officesupplies %&gt;% 
  select(Region,Item,Units) %&gt;% 
  group_by(Region,Item) %&gt;% 
  summarise(Sold_Units = sum(Units))
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-28" style="background:;">
  <hgroup>
    <h2>Desarrollo Tarea Nº3</h2>
  </hgroup>
  <article data-timings="">
    <h3>Paso 3:</h3>

<pre><code class="r">### ingreso por región e item
officesupplies %&gt;% 
  select(Region,Item,Units,`Unit Price`) %&gt;% 
  rename(Unit_Price = `Unit Price`) %&gt;% 
  group_by(Region,Item) %&gt;% 
  summarise(Income = sum(Units * Unit_Price))
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-29" style="background:;">
  <hgroup>
    <h3>Paso 4:</h3>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">officesupplies = officesupplies %&gt;% 
  select(Region,Item,Units,`Unit Price`) %&gt;% 
  rename(Unit_Price = `Unit Price`) %&gt;% 
  mutate(Income = Units * Unit_Price) %&gt;% 
  write_csv(paste0(folder,&quot;lecture1_office_supplies.csv&quot;))
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-30" style="background:;">
  <hgroup>
    <h2>Tarea Nº4</h2>
  </hgroup>
  <article data-timings="">
    <p>Vamos a usar el archivo <a href="https://visualizacion-uc.github.io/procesamiento-y-analisis-de-datos/datasets/lecture1_copper.csv">lecture1_copper.csv</a> y lo vamos a descargar y leer desde R.</p>

<p>Pasos a seguir:</p>

<ol>
<li>Crear el directorio &quot;datasets&quot; y descargar el archivo si y sólo si este no está en el directorio &quot;datasets&quot;</li>
<li>Leer el archivo CSV usando la función <code>read_csv</code> (una función del paquete <code>readr</code>) y convierte la columna <code>product</code> de <code>chr</code> a <code>factor</code> (para poder mostrar mejor la información en el paso 3)

<ol>
<li>En lugar de <code>copper</code> deberás mostrar <em>Cobre</em></li>
<li>En lugar de <code>other</code> deberás mostrar <em>Pulpa de madera, fruta, salmón y otros</em></li>
</ol></li>
<li>Crea un gráfico de línea con las siguientes características

<ol>
<li>El <em>eje x</em> debe ser el año (mostrar todos los años) y el <em>eje y</em> las exportaciones</li>
<li>Coloreado por producto con los colores <code>c(&quot;#40b8d0&quot;, &quot;#b2d183&quot;)</code> y con ancho de línea de <code>1.5</code></li>
<li>El <em>eje x</em> debe mostrar todos los años</li>
<li>El título debe ser <em>Composición de las exportaciones a China ($)</em> y el subtítulo debe ser <em>Fuente: Aduana de Chile</em></li>
</ol></li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-31" style="background:;">
  <hgroup>
    <h2>Desarrollo Tarea Nº4</h2>
  </hgroup>
  <article data-timings="">
    <h3>Paso 1:</h3>

<pre><code class="r">folder = &quot;datasets/&quot;
file = paste0(folder,&quot;lecture1_copper.csv&quot;) 
### &quot;paste0&quot; pega elementos sin espacios
### &quot;paste&quot; agrega espacios

try(dir.create(folder))

if(!file.exists(file)) {
  download.file(
    &quot;https://visualizacion-uc.github.io/procesamiento-y-analisis-de-datos/datasets/lecture1_copper.csv&quot;,
    file)
}
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-32" style="background:;">
  <hgroup>
    <h2>Desarrollo Tarea Nº4</h2>
  </hgroup>
  <article data-timings="">
    <h3>Paso 2:</h3>

<pre><code class="r">copper = read_csv(file)

### vista rápida de las columnas
str(copper)

### convertir a factor
copper = copper %&gt;% 
  mutate(product = factor(product, levels = c(&quot;copper&quot;,&quot;others&quot;),
                          labels = c(&quot;Cobre &quot;,&quot;Pulpa de madera, fruta, salmón y otros&quot;)))
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-33" style="background:;">
  <hgroup>
    <h2>Desarrollo Tarea Nº4</h2>
  </hgroup>
  <article data-timings="">
    <h3>Paso 3:</h3>

<pre><code class="r">copper %&gt;% 
  ggplot(aes(y = export, x = year, colour = product)) + 
  geom_line(size = 1.5) + 
  scale_x_continuous(breaks = seq(2006,2014,1)) +
  labs(title = &quot;Composici\u00f3n de las exportaciones a China ($)&quot;, 
       subtitle = &quot;Fuente: Aduana de Chile&quot;,
       x = &quot;A\u00f1o&quot;, 
       y = &quot;Millones de d\u00f3lares&quot;) + 
  scale_colour_manual(values = c(&quot;#40b8d0&quot;, &quot;#b2d183&quot;))
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-34" style="background:;">
  <hgroup>
    <h2>Tarea Nº5</h2>
  </hgroup>
  <article data-timings="">
    <p>A partir de lo anterior crea un gráfico de área y luego un gráfico de área y uno de barras revirtiendo el orden en que se muestran las series.</p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-35" style="background:;">
  <hgroup>
    <h2>Desarrollo Tarea Nº5</h2>
  </hgroup>
  <article data-timings="">
    <h3>Parte 1:</h3>

<pre><code class="r">copper %&gt;% 
  ggplot(aes(y = export, x = year, fill = product)) + 
  geom_area() + 
  scale_x_continuous(breaks = seq(2006,2014,1)) + 
  labs(title = &quot;Composici\u00f3n de las exportaciones a China ($)&quot;, 
       subtitle = &quot;Fuente: Aduana de Chile&quot;,
       x = &quot;A\u00f1o&quot;, 
       y = &quot;Millones de d\u00f3lares&quot;) + 
  scale_fill_manual(values = c(&quot;#40b8d0&quot;, &quot;#b2d183&quot;))
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-36" style="background:;">
  <hgroup>
    <h2>Desarrollo Tarea Nº5</h2>
  </hgroup>
  <article data-timings="">
    <h3>Parte 2:</h3>

<pre><code class="r">copper %&gt;% 
  ggplot(aes(y = export, x = year, fill = fct_rev(product))) + 
  geom_area() + 
  scale_x_continuous(breaks = seq(2006,2014,1)) + 
  labs(title = &quot;Composici\u00f3n de las exportaciones a China ($)&quot;, 
       subtitle = &quot;Fuente: Aduana de Chile&quot;,
       x = &quot;A\u00f1o&quot;, 
       y = &quot;Millones de d\u00f3lares&quot;) + 
  scale_fill_manual(values = c(&quot;#b2d183&quot;,&quot;#40b8d0&quot;))
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-37" style="background:;">
  <hgroup>
    <h2>Desarrollo Tarea Nº5</h2>
  </hgroup>
  <article data-timings="">
    <h3>Parte 3:</h3>

<pre><code class="r">copper %&gt;%
  ggplot(aes(y = export, x = year, fill = fct_rev(product))) + 
  geom_col() + 
  scale_x_continuous(breaks = seq(2006,2014,1)) +
  labs(title = &quot;Composici\u00f3n de las exportaciones a China ($)&quot;, 
       subtitle = &quot;Fuente: Aduana de Chile&quot;,
       x = &quot;A\u00f1o&quot;, 
       y = &quot;Millones de d\u00f3lares&quot;) + 
  scale_fill_manual(values = c(&quot;#b2d183&quot;,&quot;#40b8d0&quot;))
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-38" style="background:;">
  <hgroup>
    <h2>Tarea Nº6</h2>
  </hgroup>
  <article data-timings="">
    <p>Ahora mejora el gráfico de barras anterior:</p>

<ol>
<li>Agrega etiquetas de datos a las series</li>
<li>Arregla los colores del fondo y mueve la leyenda a la parte inferior</li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-39" style="background:;">
  <hgroup>
    <h2>Desarrollo Tarea Nº6</h2>
  </hgroup>
  <article data-timings="">
    <h3>Parte 1:</h3>

<pre><code class="r">chart = copper %&gt;%
  group_by(year) %&gt;% 
  mutate(pos = cumsum(export) - (0.5 * export)) %&gt;% 
  ggplot(aes(y = export, x = year, fill = fct_rev(product))) + 
  geom_col() + 
  geom_text(aes(x = year, y = pos, label = export), colour = &quot;black&quot;, 
            size = 4, show.legend = F) + 
  scale_x_continuous(breaks = seq(2006,2014,1)) +
  labs(title = &quot;Composici\u00f3n de las exportaciones a China ($)&quot;, 
       subtitle = &quot;Fuente: Aduana de Chile&quot;,
       x = &quot;A\u00f1o&quot;, 
       y = &quot;Millones de d\u00f3lares&quot;)
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-40" style="background:;">
  <hgroup>
    <h2>Desarrollo Tarea Nº6</h2>
  </hgroup>
  <article data-timings="">
    <h3>Parte 2:</h3>

<pre><code class="r">chart +
  scale_fill_manual(values = c(&quot;#b2d183&quot;,&quot;#40b8d0&quot;)) + 
  theme_bw() +
  theme(legend.position = &quot;bottom&quot;, legend.direction = &quot;horizontal&quot;, 
        legend.title = element_blank()) +
  guides(fill = guide_legend(reverse = T))
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-41" style="background:;">
  <hgroup>
    <h2>Tarea Nº7</h2>
  </hgroup>
  <article data-timings="">
    <p>Selecciona todos los archivos de tu projecto en RStudio Server y exporta tus archivos para bajarlos en zip.</p>

<p>Si el alcanza el tiempo, instala R y RStudio en tu propio notebook.</p>

<ul>
<li><p><a href="https://cran.r-project.org/">Descargar R</a></p></li>
<li><p><a href="https://www.rstudio.com/products/rstudio/download/#download">Descargar RStudio</a></p></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

    <slide class="backdrop"></slide>
  </slides>
  <div class="pagination pagination-small" id='io2012-ptoc' style="display:none;">
    <ul>
      <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=1 title='Introducción'>
         1
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=2 title='R versus Excel'>
         2
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=3 title='Tidy Data'>
         3
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=4 title='La filosofía del curso'>
         4
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=5 title='Google Sheets'>
         5
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=6 title='Google Sheets'>
         6
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=7 title='Google Sheets'>
         7
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=8 title='Google Sheets'>
         8
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=9 title='Google Sheets'>
         9
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=10 title='R y RStudio'>
         10
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=11 title='Paquetes de R'>
         11
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=12 title='Base R y Tidyverse'>
         12
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=13 title='¡Eficiencia, Eficiencia, Eficiencia!'>
         13
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=14 title='Instalación de paquetes de R'>
         14
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=15 title='¿Cómo se usará lo anterior?'>
         15
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=16 title='Gramática de verbos'>
         16
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=17 title='¿Cómo operan los verbos?'>
         17
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=18 title='Tarea Nº1'>
         18
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=19 title='Tarea Nº1'>
         19
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=20 title='Tarea Nº2'>
         20
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=21 title='Desarrollo Tarea Nº2'>
         21
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=22 title='Desarrollo Tarea Nº2'>
         22
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=23 title='Desarrollo Tarea Nº2'>
         23
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=24 title='Tarea Nº3'>
         24
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=25 title='Desarrollo Tarea Nº3'>
         25
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=26 title='Desarrollo Tarea Nº3'>
         26
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=27 title='Desarrollo Tarea Nº3'>
         27
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=28 title='Desarrollo Tarea Nº3'>
         28
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=29 title='Paso 4:'>
         29
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=30 title='Tarea Nº4'>
         30
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=31 title='Desarrollo Tarea Nº4'>
         31
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=32 title='Desarrollo Tarea Nº4'>
         32
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=33 title='Desarrollo Tarea Nº4'>
         33
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=34 title='Tarea Nº5'>
         34
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=35 title='Desarrollo Tarea Nº5'>
         35
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=36 title='Desarrollo Tarea Nº5'>
         36
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=37 title='Desarrollo Tarea Nº5'>
         37
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=38 title='Tarea Nº6'>
         38
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=39 title='Desarrollo Tarea Nº6'>
         39
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=40 title='Desarrollo Tarea Nº6'>
         40
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=41 title='Tarea Nº7'>
         41
      </a>
    </li>
  </ul>
  </div>  <!--[if IE]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">  
    </script>
    <script>CFInstall.check({mode: 'overlay'});</script>
  <![endif]-->
</body>
  <!-- Load Javascripts for Widgets -->
  
  <!-- LOAD HIGHLIGHTER JS FILES -->
  <script src="../libraries/highlighters/highlight.js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!-- DONE LOADING HIGHLIGHTER JS FILES -->
   
  </html>